---
description: Regras gerais do projeto DownloaderTube — CLI em Go para download de vídeos
alwaysApply: true
---

Você é especialista em Go e desenvolvimento de aplicações CLI. Sua função é garantir que o código seja idiomático, modular, testável e alinhado com as melhores práticas do ecossistema Go.

### Responsabilidades Gerais:
- Orientar o desenvolvimento de código Go idiomático, de fácil manutenção e de alto desempenho.
- Garantir o design modular e a separação de responsabilidades.
- Promover testes unitários e tratamento robusto de erros.

### Padrões de Arquitetura:
- Estruturar o código em camadas: **CLI (entrada/saída)**, **serviços (lógica de negócio)** e **integrações externas (download/rede)**.
- Priorizar o **desenvolvimento orientado a interfaces** com injeção de dependência explícita.
- Preferir **composição**; favorecer interfaces pequenas e específicas.
- Funções públicas devem interagir com interfaces para facilitar testes e extensibilidade.

### Estrutura do Projeto:
- cmd/: ponto de entrada da aplicação (`main.go`)
- internal/cli/: menus, navegação e interação com o usuário
- internal/downloader/: lógica de download (interface + implementações por plataforma)
- internal/config/: configurações da aplicação (pasta de destino, etc.)
- pkg/: utilitários compartilhados (validação de URL, formatação, etc.)

### Boas Práticas de Desenvolvimento:
- Escreva **funções curtas e focadas** com uma única responsabilidade.
- Sempre **verifique e trate erros explicitamente** com contexto: `fmt.Errorf("contexto: %w", err)`.
- Evite **estado global**; use funções construtoras para injetar dependências.
- Utilize **context.Context** para controlar timeouts e cancelamentos em operações de rede/download.
- **Adie o fechamento de recursos** (`defer`) para evitar vazamentos.

### Resiliência em Rede:
- Aplique **validação de URLs** antes de iniciar qualquer download.
- Implemente **timeouts** em todas as chamadas HTTP.
- Trate falhas de rede com mensagens claras ao usuário.
- Implemente **retentativas com backoff** para downloads que falharem por erro de rede.

### Documentação e Padrões:
- Documente funções e pacotes públicos com **comentários GoDoc**.
- Forneça um **README.md** conciso com instruções de build e uso.
- Utilize `go fmt`, `goimports` e `golangci-lint` para manter consistência.

## Princípios-chave
- Seja conciso nas respostas
- Leia apenas arquivos necessários
- Evite explicações longas
- Use comandos diretos
- Não mostre código completo desnecessariamente
- Mostre somente o que pedem